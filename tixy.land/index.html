<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=400, user-scalable=no" />
    <meta name="theme-color" content="#000000" />
    <title>(t,i,x,y) => "创作代码高尔夫"</title>
    <meta charset="utf-8" />
    <meta
      name="description"
      content="A minimalist coding environment. Control 16x16 points with a single JavaScript function."
    />
    <style>
      html {
        background-color: #000;
        color: #fff;
        height: 100%;
      }
      * {
        box-sizing: border-box;
      }
      a:link,
      a:visited {
        color: #f24;
      }
      *,
      html,
      input {
        font-family: monospace;
        font-size: 14px;
      }
      body {
        padding: 0;
        margin: 0;
        display: grid;
        align-items: center;
        justify-items: center;
        height: 100%;
      }
      #editor,
      #editor.over-limit.focus label.limit-warning,
      #output,
      input,
      label {
        display: block;
      }
      #editor {
        width: 271px;
        line-height: 1.15em;
      }
      #editor #input {
        background: 0 0;
        color: #fff;
        padding: 0;
        margin: 0.15em 0;
        border: 0;
        width: 250%;
      }
      #editor #input:focus {
        outline: 0;
      }
      #code-runner,
      #editor label.limit-warning,
      #editor.over-limit.focus label.second {
        display: none;
      }
      #editor #comment {
        color: #f24;
      }
      #editor.over-limit #input {
        background: #f24;
        color: #fff;
      }
    </style>
    <link rel="icon" type="image/png" href="./favicon.9fed2980.png" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./apple-touch-icon.b9a24498.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="512x512"
      href="./android-chrome-512x512.e49c1300.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="./android-chrome-192x192.b729a878.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./favicon-32x32.76100e1a.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./favicon-16x16.3b2b8e5e.png"
    />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@aemkei" />
    <meta name="twitter:title" content="(t,i,x,y) => 'creative code golfing'" />
    <meta
      name="twitter:description"
      content="A minimalist coding environment. Control 16x16 points with a single JavaScript function. By @aemkei"
    />
    <meta name="twitter:image" content="./assets/twitter-card.png" />
  </head>
  <body>
    <canvas id="output"></canvas>
    <form id="editor">
      <div id="comment">
        <label class="first" for="input">// tixy - 创建代码高尔夫球场</label>
        <label class="second" for="input">// 点击球来切换方式</label>
        <label class="limit-warning" for="input">// 用64个字符或更少</label>
      </div>
      <label id="label" for="input">(t,i,x,y) =&gt;</label>
      <input
        name="code"
        id="input"
        type="text"
        value="Math.sin(y/8+t)"
        autocomplete="off"
        autocapitalize="off"
        spellcheck="false"
        autocorrect="off"
        enterkeyhint="go"
        maxlength="128"
      />
    </form>
    <script>
      const randint = (min, max) =>
        Math.floor(Math.random() * (max - min + 1)) + min;
      parcelRequire = (function (e, t, n, i) {
        var r,
          o = "function" == typeof parcelRequire && parcelRequire,
          a = "function" == typeof require && require;
        function s(n, i) {
          if (!t[n]) {
            if (!e[n]) {
              var r = "function" == typeof parcelRequire && parcelRequire;
              if (!i && r) return r(n, !0);
              if (o) return o(n, !0);
              if (a && "string" == typeof n) return a(n);
              var c = new Error("无法找到模块 '" + n + "'");
              throw ((c.code = "模块未找到"), c);
            }
            (u.resolve = function (t) {
              return e[n][1][t] || t;
            }),
              (u.cache = {});
            var l = (t[n] = new s.Module(n));
            e[n][0].call(l.exports, u, l, l.exports, this);
          }
          return t[n].exports;
          function u(e) {
            return s(u.resolve(e));
          }
        }
        (s.isParcelRequire = !0),
          (s.Module = function (e) {
            (this.id = e), (this.bundle = s), (this.exports = {});
          }),
          (s.modules = e),
          (s.cache = t),
          (s.parent = o),
          (s.register = function (t, n) {
            e[t] = [
              function (e, t) {
                t.exports = n;
              },
              {},
            ];
          });
        for (var c = 0; c < n.length; c++)
          try {
            s(n[c]);
          } catch (e) {
            r || (r = e);
          }
        if (n.length) {
          var l = s(n[n.length - 1]);
          "object" == typeof exports && "undefined" != typeof module
            ? (module.exports = l)
            : "function" == typeof define &&
              define.amd &&
              define(function () {
                return l;
              });
        }
        if (((parcelRequire = s), r)) throw r;
        return s;
      })(
        {
          I5x1: [
            function (e, t, n) {
              t.exports = {
                正数是白色: "1",
                "0是没有": "0",
                负数是红色: "-1",
                // "每个点返回0或1 \n来改变可见度": "Math.random() < 0.1",
                "用一个在0和1之间的浮点数\n来定义大小": "Math.random()",
                "也可以是0和-1之间": "-Math.random()",
                "参数“t” 是 \n时间（秒）": "Math.sin(t)",
                "参数 “i” 是点 \n的索引 (0..255)": "i / 256",
                "参数 “x” 是列索引\n 从 0 到 15": "x / 16",
                "“y” 是行的\n 也是从 0 到 15": "y / 16",
                // "正数是白的，\n负数是红的": "y - 7.5",
                "利用时间\n做动画": "y - t",
                "乘上时间\n改变速度": "y - t*4",
                "给它们 \n找同伴": "[1, 0, -1][i%3]",
                "使用“数学”方法\n和类似 “sin” 或 “π” 的东西":
                  "sin(t-sqrt((x-7.5)**2+(y-6)**2))",
                妙用随机数: "randint(-1, 1)",
                "更多例子……": "sin(y/8 + t)",
                简单的三角形: "y - x",
                "¼个三角形": "(y > x) && (14-x < y)",
                更多同伴: "i%4 - y%4",
                网格: "x%4 && y%4",
                正方形: "x>3 & y>3 & x<12 & y<12",
                "消失的 “它” ": "-(x>t & y>t & x<15-t & y<15-t)",
                更多方形: "(y-6) * (x-6)",
                静态的线: "t * --y * --x",
                移动的线: "(y-4*t|0) * (x-2-t|0)",
                谢尔平斯基: "4 * t & i & x & y",
                二进制块: "(t*10) & (1<<x) && y==8",
                随机噪音: "random() * 2 - 1",
                静态平滑噪音: "sin(i ** 2)",
                动态平滑噪音: "cos(t + i + x * y)",
                波动: "sin(x/2) - sin(x-t) - y+6",
                冰火两重天: "random() * t / (y - x)",
                横向擦除: "t - y",
                纵向擦除: "t - x",
                电梯: "tan(y - t*4)",
                斜线: "tan(t - i)",
                "像不像\n上一个？": "cos(t)-sin(i)",
                有点意思: "randint(sin(t),cos(i))",
                奇妙的变换: "sin(t&i)",
                奇妙的倾斜: "t<<i<<x<<y",
                毫无规律: "sin(t&x|y)",
                这样也很有趣: "sin(t&x|y^i)",
                星星点点: "tan(i-y-t)",
                颤抖: "sqrt(2) - PI + random()",
                "╳": "y == x || -(15-x == y)",
                窗口: "x==0 | x==15 | y==0 | y==15",
                扩散: "8*t%13 - hypot(x-7.5, y-7.5)",
                转圈圈: "sin(2*atan((y-7.5)/(x-7.5))+5*t)",
                擦除: "(x-y) - sin(t) * 16",
                轻轻抹去: "(x-y)/24 - sin(t)",
                迪斯科: "sin(t*5) * tan(t*7)",
                "输入有限\n32个字符！": "(x-5)**2 + (y-5)**2 - 99*sin(t)",
                "反弹，反弹，再反弹\n作者： @v21": "(x-8)*(y-8) - sin(t)*64",
                "烟花爆竹\n作者：@p_malin 和 @aemkei":
                  "-.4/(hypot(x-t%10,y-t%8)-t%2*9)",
                "涟漪\n作者： @thespite": "Math.sin(t-Math.sqrt(x*x+y*y))",
                "滚动的 “TIXY” 字体\n作者： @atesgoral":
                  "[5463,2194,2386][y+t*9&7]&1<<x-1",
                "3d 国际象棋棋盘\n作者： @p_malin":
                  "(((x-8)/y+t*5)&1^1/y*8&1)*y/5",
                "粘稠的血\n作者： @joeytwiddle":
                  "y-t*3+9+3*cos(x*3-t)-5*sin(x*7)",
                "3d 流星\n作者： @p_malin": "d=y*y%5.9+1,!((x+t*50/d)&15)/d",
                "与外星人的对话\n作者： @chiptune": "1/32*tan(t/64*x*tan(i-x))",
                "太空入侵者\n作者： @keithclarkcouk + @zozuar":
                  "'p}¶¼<¼¶}p'.charCodeAt(x)&2**y",
                "吃豆人\n作者： @p_malin and @aemkei":
                  "hypot(x-=t%4*5,y-=8)<6&&x<y|y<-x",
                "频谱分析仪\n作者： @joeytwiddle": "x&y<9&y>4+sin(8*t+x*x)+x/4",
                "点这里\n创作你自己的": "祝你开心",
              };
            },
            {},
          ],
          Focm: [
            function (e, t, n) {
              "use strict";
              var i = (function (e) {
                return e && e.__esModule ? e : { default: e };
              })(e("./examples.json"));
              var r = 16,
                o = 16,
                a = 1,
                s = r * (o + a) - a,
                c = document.getElementById("input"),
                l = document.getElementById("editor"),
                u = document.getElementById("comment"),
                d = document.getElementById("output"),
                y = d.getContext("2d"),
                f = window.devicePixelRatio || 1,
                h = function () {},
                m = null,
                p = "";
              function x() {
                var e = new URL(document.location);
                e.searchParams.has("code") &&
                  (c.value = e.searchParams.get("code"));
              }
              function v() {
                (p = c.value),
                  (m = null),
                  p.length > 64
                    ? l.classList.add("over-limit")
                    : l.classList.remove("over-limit");
                try {
                  h = new Function(
                    "t",
                    "i",
                    "x",
                    "y",
                    "\n      try {\n        with (Math) {\n          return ".concat(
                      p,
                      ";\n        }\n      } catch (error) {\n        return error;\n      }\n    "
                    )
                  );
                } catch (e) {
                  h = null;
                }
              }
              function w(e) {
                var t = u.querySelectorAll("label");
                1 === e.length
                  ? ((t[0].innerHTML = "&nbsp;"),
                    (t[1].innerHTML = "// ".concat(e[0])))
                  : ((t[0].innerHTML = "// ".concat(e[0])),
                    (t[1].innerHTML = "// ".concat(e[1])));
              }
              function b() {
                var e = c.value,
                  t = Object.values(i.default),
                  n = Object.keys(i.default)[t.indexOf(e)];
                n && w(n.split("\n"));
              }
              (d.width = d.height = s * f),
                y.scale(f, f),
                (d.style.width = d.style.height = "".concat(s, "px")),
                x(),
                c.addEventListener("input", v),
                v(),
                c.addEventListener("focus", function () {
                  l.classList.add("focus"),
                    w([
                      "按“回车”键保存 URL",
                      ' 或者发给 <a href="mailto:Zelian666@outlook.com">Zelian666@outlook.com</a>',
                    ]);
                }),
                c.addEventListener("blur", function () {
                  b(), l.classList.remove("focus");
                }),
                l.addEventListener("submit", function (e) {
                  e.preventDefault();
                  var t = new URL(document.location);
                  t.searchParams.set("code", p),
                    history.replaceState(null, p, t);
                }),
                (function e() {
                  var t = 0;
                  if (
                    (m ? (t = (new Date() - m) / 1e3) : (m = new Date()), h)
                  ) {
                    (d.width = d.height = s * f), y.scale(f, f);
                    for (var n = 0, i = 0; i < r; i++)
                      for (var c = 0; c < r; c++) {
                        var l = Number(h(t, n, c, i)),
                          u = o / 2,
                          p = "#FFF",
                          x = (l * o) / 2;
                        x < 0 && ((x = -x), (p = "#F24")),
                          x > o / 2 && (x = o / 2),
                          y.beginPath(),
                          (y.fillStyle = p),
                          y.arc(
                            c * (o + a) + u,
                            i * (o + a) + u,
                            x,
                            0,
                            2 * Math.PI
                          ),
                          y.fill(),
                          n++;
                      }
                    window.requestAnimationFrame(e);
                  } else window.requestAnimationFrame(e);
                })(),
                d.addEventListener("click", function () {
                  var e = Object.values(i.default),
                    t = e.indexOf(p);
                  if (e[t + 1]) {
                    var n = e[(t += 1)];
                    (c.value = n), b(), v();
                  } else {
                    var n = e[(t = 0)];
                    (c.value = n), b(), v();
                  }
                }),
                (window.onpopstate = function (e) {
                  x(), v();
                }),
                b();
            },
            { "./examples.json": "I5x1" },
          ],
        },
        {},
        ["Focm"]
      );
    </script>
  </body>
</html>
